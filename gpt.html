<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>EXODUS Football</title>
<style>
body{margin:0;background:#12001f;color:white;font-family:Arial}
canvas{display:block;margin:auto;background:#2a0040}
</style>
</head>
<body>
<canvas id="game" width="1280" height="720"></canvas>
<script>
const canvas=document.getElementById("game")
const ctx=canvas.getContext("2d")

/* ================= CORE STATE ================= */
let score=0,down=1,toGo=10,clock=600,ballSnapped=false,camX=0
let selectedRoute=0,selectedPlayer=0
const keys={}
addEventListener("keydown",e=>keys[e.key]=true)
addEventListener("keyup",e=>keys[e.key]=false)

/* ================= UTIL ================= */
const clamp=(v,a,b)=>Math.max(a,Math.min(b,v))
const dist=(a,b)=>Math.hypot(a.x-b.x,a.y-b.y)

/* ================= PLAYER ================= */
class Player{
constructor(x,y,role){
this.x=x;this.y=y;this.w=22;this.h=22
this.vx=0;this.vy=0;this.s=4
this.route=[];this.step=0;this.role=role
this.carry=false;this.color=role==="QB"?"gold":"white"
}
update(){
if(this.role!=="QB"&&ballSnapped&&this.route.length){
let t=this.route[this.step]
if(t){
this.x+=Math.sign(t.x-this.x)*this.s
this.y+=Math.sign(t.y-this.y)*this.s
if(dist(this,t)<5)this.step++
}
}
if(this.carry){
if(keys.w)this.y-=this.s
if(keys.s)this.y+=this.s
if(keys.a)this.x-=this.s
if(keys.d)this.x+=this.s
}
this.x=clamp(this.x,0,canvas.width)
this.y=clamp(this.y,0,canvas.height)
}
draw(){
ctx.fillStyle=this.color
ctx.fillRect(this.x-camX,this.y,this.w,this.h)
}
}

/* ================= DEFENDER ================= */
class Defender{
constructor(x,y){
this.x=x;this.y=y;this.s=2.5;this.w=22;this.h=22
}
update(target){
this.x+=Math.sign(target.x-this.x)*this.s
this.y+=Math.sign(target.y-this.y)*this.s
}
draw(){
ctx.fillStyle="red"
ctx.fillRect(this.x-camX,this.y,this.w,this.h)
}
}

/* ================= BALL ================= */
class Ball{
constructor(){
this.x=0;this.y=0;this.vx=0;this.vy=0;this.live=false
}
throw(from,to){
this.x=from.x;this.y=from.y
this.vx=(to.x-from.x)/25
this.vy=(to.y-from.y)/25
this.live=true
}
update(){
if(this.live){
this.x+=this.vx
this.y+=this.vy
this.vy+=0.15
}
}
draw(){
ctx.fillStyle="#7b3f00"
ctx.beginPath()
ctx.arc(this.x-camX,this.y,6,0,Math.PI*2)
ctx.fill()
}
}

/* ================= ROUTES ================= */
function makeRoute(p,type){
p.route=[]
p.step=0
let x=p.x,y=p.y
if(type===1)for(let i=0;i<8;i++)p.route.push({x:x+i*15,y:y})
if(type===2)for(let i=0;i<12;i++)p.route.push({x:x+i*15,y:y-i*6})
if(type===3)for(let i=0;i<8;i++)p.route.push({x:x+i*10,y:y+20})
if(type===4)for(let i=0;i<10;i++)p.route.push({x:x+i*14,y:y-i*3})
}

/* ================= FIELD ================= */
function drawField(){
ctx.fillStyle="#3a005c"
ctx.fillRect(0,0,canvas.width,canvas.height)
ctx.strokeStyle="white"
for(let i=0;i<canvas.width;i+=100){
ctx.beginPath();ctx.moveTo(i-camX,0);ctx.lineTo(i-camX,720);ctx.stroke()
}
ctx.fillStyle="purple"
ctx.fillRect(-camX,0,100,720)
ctx.fillRect(1180-camX,0,100,720)
ctx.fillStyle="white"
ctx.font="50px Arial"
ctx.fillText("EXODUS",30-camX,360)
}

/* ================= HUD ================= */
function hud(){
ctx.fillStyle="white"
ctx.font="18px Arial"
ctx.fillText("Score: "+score,20,30)
ctx.fillText("Down: "+down+" | To Go: "+toGo,20,55)
ctx.fillText("Clock: "+Math.floor(clock),20,80)
ctx.fillText("Routes: 1 Slant  2 Streak  3 Out  4 Post",20,110)
}

/* ================= SETUP ================= */
const qb=new Player(200,360,"QB")
const wr1=new Player(200,300,"WR")
const wr2=new Player(200,420,"WR")
const offense=[qb,wr1,wr2]
const defense=[new Defender(700,260),new Defender(740,460),new Defender(820,360)]
const ball=new Ball()

/* ================= LOGIC ================= */
function logic(){
clock-=1/60
if(keys["Enter"]&&!ballSnapped)ballSnapped=true
if(keys["Tab"])selectedPlayer=(selectedPlayer+1)%offense.length
if(keys["1"])makeRoute(wr1,1)
if(keys["2"])makeRoute(wr1,2)
if(keys["3"])makeRoute(wr1,3)
if(keys["4"])makeRoute(wr1,4)

offense.forEach(p=>p.update())
defense.forEach(d=>d.update(ball.live?ball:wr1))

if(keys[" "]&&!ball.live&&ballSnapped){
ball.throw(qb,wr1)
}

ball.update()
camX=qb.x-300

if(dist(ball,wr1)<15&&ball.live){
ball.live=false
wr1.carry=true
}

defense.forEach(d=>{
if(dist(d,wr1)<18){
down++
wr1.carry=false
ballSnapped=false
wr1.x=200;wr1.y=300
}
})

if(wr1.x>1180){
score+=7
down=1
ballSnapped=false
wr1.x=200
}
}

/* ================= DRAW ================= */
function draw(){
drawField()
offense.forEach(p=>p.draw())
defense.forEach(d=>d.draw())
ball.draw()
hud()
}

/* ================= LOOP ================= */
function loop(){
logic()
draw()
requestAnimationFrame(loop)
}
loop()
</script>
</body>
</html>
