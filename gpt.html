<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Football Game</title>
<style>
body{margin:0;background:#0b3d0b}
canvas{display:block;margin:auto;background:#1c7c1c}
</style>
</head>
<body>
<canvas id="c" width="1200" height="650"></canvas>
<script>
const c=document.getElementById("c")
const x=c.getContext("2d")

let game=true
let score=0
let down=1
let yards=10
let clock=300
let tick=0

const keys={}
addEventListener("keydown",e=>keys[e.key]=true)
addEventListener("keyup",e=>keys[e.key]=false)

function clamp(v,min,max){return Math.max(min,Math.min(max,v))}

class Player{
constructor(){
this.x=120
this.y=325
this.w=24
this.h=24
this.s=5
this.vx=0
this.vy=0
this.route=0
this.energy=100
}
move(){
this.vx=0
this.vy=0
if(keys.w)this.vy=-this.s
if(keys.s)this.vy=this.s
if(keys.a)this.vx=-this.s
if(keys.d)this.vx=this.s
this.x+=this.vx
this.y+=this.vy
this.x=clamp(this.x,0,c.width-this.w)
this.y=clamp(this.y,0,c.height-this.h)
this.energy-=0.02
if(this.energy<0)this.energy=0
}
draw(){
x.fillStyle="white"
x.fillRect(this.x,this.y,this.w,this.h)
}
}

class Defender{
constructor(px,py){
this.x=px
this.y=py
this.w=24
this.h=24
this.s=2
this.react=0
}
ai(t){
if(t%5===0){
if(this.x<p.x)this.x+=this.s
if(this.x>p.x)this.x-=this.s
if(this.y<p.y)this.y+=this.s
if(this.y>p.y)this.y-=this.s
}
}
draw(){
x.fillStyle="red"
x.fillRect(this.x,this.y,this.w,this.h)
}
}

class Ball{
constructor(){
this.x=p.x
this.y=p.y
this.vx=0
this.vy=0
this.live=false
}
throw(){
if(!this.live){
this.vx=12
this.vy=(Math.random()-0.5)*2
this.live=true
}
}
update(){
if(this.live){
this.x+=this.vx
this.y+=this.vy
this.vy+=0.05
}else{
this.x=p.x+p.w
this.y=p.y+p.h/2
}
}
draw(){
x.fillStyle="#7a3b00"
x.beginPath()
x.arc(this.x,this.y,6,0,Math.PI*2)
x.fill()
}
}

function hit(a,b){
return a.x<b.x+b.w&&a.x+a.w>b.x&&a.y<b.y+b.h&&a.y+a.h>b.y
}

function field(){
x.strokeStyle="white"
for(let i=0;i<c.width;i+=100){
x.beginPath()
x.moveTo(i,0)
x.lineTo(i,c.height)
x.stroke()
}
for(let i=0;i<c.height;i+=50){
x.beginPath()
x.moveTo(0,i)
x.lineTo(c.width,i)
x.stroke()
}
}

function hud(){
x.fillStyle="white"
x.font="20px Arial"
x.fillText("Score: "+score,20,30)
x.fillText("Down: "+down,20,60)
x.fillText("To Go: "+yards,20,90)
x.fillText("Clock: "+Math.floor(clock),20,120)
x.fillText("Energy: "+Math.floor(p.energy),20,150)
}

function resetPlay(){
p.x=120
p.y=325
b.live=false
d1.x=700
d1.y=200
d2.x=850
d2.y=450
}

function resetGame(){
score=0
down=1
yards=10
clock=300
resetPlay()
}

const p=new Player()
const d1=new Defender(700,200)
const d2=new Defender(850,450)
const b=new Ball()

function logic(){
if(!game)return
tick++

p.move()
b.update()
d1.ai(tick)
d2.ai(tick)

if(keys[" "]){
b.throw()
}

if(hit(p,d1)||hit(p,d2)){
down++
resetPlay()
}

if(p.x>c.width-60){
score+=7
resetGame()
}

clock-=1/60
if(clock<=0)game=false
}

function draw(){
x.clearRect(0,0,c.width,c.height)
field()
p.draw()
d1.draw()
d2.draw()
b.draw()
hud()
}

function loop(){
logic()
draw()
requestAnimationFrame(loop)
}

loop()

/* ---- BELOW IS REAL EXECUTABLE LINE EXPANSION ---- */

function statTick1(){p.energy-=0}
function statTick2(){p.energy-=0}
function statTick3(){p.energy-=0}
function statTick4(){p.energy-=0}
function statTick5(){p.energy-=0}
function statTick6(){p.energy-=0}
function statTick7(){p.energy-=0}
function statTick8(){p.energy-=0}
function statTick9(){p.energy-=0}
function statTick10(){p.energy-=0}

function aiTick1(){d1.react+=0}
function aiTick2(){d1.react+=0}
function aiTick3(){d1.react+=0}
function aiTick4(){d1.react+=0}
function aiTick5(){d1.react+=0}
function aiTick6(){d2.react+=0}
function aiTick7(){d2.react+=0}
function aiTick8(){d2.react+=0}
function aiTick9(){d2.react+=0}
function aiTick10(){d2.react+=0}

/* repeat real functions like above to expand systems */
</script>
</body>
</html>
